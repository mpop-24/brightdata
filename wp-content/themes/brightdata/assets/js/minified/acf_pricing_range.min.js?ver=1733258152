'use strict';const pricing_range={sliders:document.querySelectorAll('.range_slider'),template:'res_proxy',data:{},main_wrap:document.querySelector('.pricing_range'),init(){this.set_template();if(this.sliders)
this.sliders.forEach((slider,i)=>this.update(slider,i))},set_template(){if(this.main_wrap&&this.main_wrap.classList.contains('datasets'))
this.template='datasets'},update(slider,i){let bubble=slider.closest('.range__wrapper').querySelector('.range_desc__inner');if(!slider)
return;this.update_bubble(slider,i,bubble,this.template);slider.oninput=()=>{this.update_bubble(slider,i,bubble,this.template)};let price_range=slider.closest('.pricing_range');if(!price_range)
return;let yearly=price_range.querySelector('[name="yearly"]');if(yearly){yearly.addEventListener('change',e=>this.update_bubble(slider,i,bubble,this.template))}
if(this.template=='datasets'){yearly=price_range.querySelectorAll('input[name="scale"]');if(!yearly)
return;yearly.forEach(item=>{item.addEventListener('change',()=>{if(item.checked)
this.update_bubble(slider,i,bubble,this.template)})})}},find_precommit(val,i,data){let precommit={};for(let[comm,item]of Object.entries(data)){comm=+comm;if(comm>val)
continue;precommit=item}
return precommit},find_plan(price,i,data){if(!data.precommits)
return 0;let plans=data.precommits;return plans.find((v,idx,a)=>v<=price&&a[idx+1]>price||!a[idx+1])},set_colors(){const is_dark=this.main_wrap.classList.contains('is_dark');let f_color='#3d7ffc';let s_color='#70879c';if(this.template=='datasets')
s_color='#D2DCE4';if(pricing_range&&is_dark){f_color='#9D97F4';s_color='#70879c'}
return[f_color,s_color]},update_slider(slider){let val=(slider.value-slider.min)/(slider.max-slider.min)*100;const colors_arr=this.set_colors();slider.style.background='linear-gradient(to right, '+colors_arr[0]+' 0%, '+colors_arr[0]+' '+val+'%, '+colors_arr[1]+' '+val+'%, '+colors_arr[1]+' 100%)';let desc_item=slider.closest('.range__wrapper').querySelector('.range_desc__inner');let tp_item=slider.closest('.range__wrapper').querySelector('.range_tp');if(val<6)
val=6;let end_val=this.template!=='datasets'?74:80;if(val>end_val)
val=end_val;if(this.template!=='datasets')
desc_item.style.marginLeft=val-6+'%';else{if(val<11)
val=11;tp_item.style.marginLeft=val+'%'}},update_bubble(slider,i,bubble,template){if(!slider.value)
return;let data=JSON.parse(slider.getAttribute('data-pricing'));this.update_slider(slider);let val=slider.value;val=+val;val=val>1?val-1:val;let yearly=slider.closest('.pricing_range').querySelector('[name="yearly"]');let scale=yearly&&yearly.checked?'yearly':'monthly';if(template=='datasets')
return this.update_ds_bubble(slider,i,bubble,template);let precommit=this.find_precommit(val,i,data.data);let price=Math.round(precommit[scale].price*val);let plan=this.find_plan(price,i,data);if(!bubble)
return;let usd=new Intl.NumberFormat('en-US');price=usd.format(price);plan=usd.format(plan);bubble.innerHTML=val>1000?pricing_range_ent_tpl():pricing_range_tpl(val,price,precommit[scale].price,plan)},update_ds_bubble(slider,i,bubble,template){if(!bubble)
return;let scale=document.querySelector('input[name="scale"]:checked').value;let data=JSON.parse(slider.getAttribute('data-pricing'));this.update_slider(slider);let val=slider.value;val=+val;val=val>=1?val-1:val;val=this.calc_ds_records(val);let real_val=val;val=val>20000?20000:val;if(!data||!data.data[scale])
return;let onetime=data.data.yearly[val];data=data.data[scale];let{discount,snaps,total,price}=this.find_ds_data(data,{val});let usd=new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',maximumFractionDigits:2,minimumFractionDigits:0});let usd_frac=new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',maximumFractionDigits:4,minimumFractionDigits:0});let quantity=Intl.NumberFormat('en',{notation:'compact',maximumFractionDigits:2,minimumFractionDigits:0});const args={dis_txt:this.get_discount_txt(scale,total,onetime,snaps),val_text:quantity.format(val*1000),price:usd_frac.format(price),total:usd.format(total),snaps,discount,scale};bubble.innerHTML=pricing_range_ds_tpl(args);let tp_bubble=slider.closest('.range__wrapper').querySelector('.range_tp');let sidebar_bubble=slider.closest('.range__wrapper').querySelector('.range_desc__inner');let sidebar_txt=sidebar_bubble.querySelector('.txt');let sidebar_btn=sidebar_bubble.querySelector('.cta');if(!tp_bubble)
return;let text=tp_bubble.getAttribute('data-records');tp_bubble.innerHTML='<strong>'+args.val_text+'</strong> '+text;if(real_val>=20000){sidebar_txt.innerHTML=this.tp_ent();sidebar_btn.classList.add('pb-6');tp_bubble.classList.add('ent')}else{tp_bubble.classList.remove('ent');sidebar_btn.classList.remove('pb-6')}},tp_ent(){return pricing_range_ent_tooltip_ds_tpl()},get_discount_txt(scale,total,onetime_data,snaps){if(!scale||!total||!onetime_data||!snaps||scale=='yearly')
return'';let highest=onetime_data.total*snaps;let quantity=Intl.NumberFormat('en',{notation:'compact',maximumFractionDigits:2,minimumFractionDigits:0,style:'currency',currency:'USD'});return quantity.format(highest-total)},calc_ds_records(val){let records=0;if(val>=0&&val<=200){val=val*1.5;records=200;records=records+val}else if(val>200&&val<=400){val=val*2.5;records=records+val}else if(val>400&&val<=600){val=val-400;records=1000;val=val*20;records=records+val}else if(val>600&&val<=800){val=val-600;records=5000;val=val*75;records=records+val}else if(val>800)
records=20001;return records},find_ds_data(data,opt){let val=opt.val||0;return data[val]||{discount:0,snaps:0,total:0,price:0}}};pricing_range.init()