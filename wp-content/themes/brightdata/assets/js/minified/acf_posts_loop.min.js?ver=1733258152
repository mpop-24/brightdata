'use strict';const brd_posts_more={target_elm:null,load_msg:null,total:0,load_more(elm,event){event.preventDefault();let type=elm.getAttribute('data-type');let tax=elm.getAttribute('data-tax')?elm.getAttribute('data-tax'):!1;let exclude;try{exclude=JSON.parse(elm.getAttribute('data-exclude'))}catch(e){exclude=[]}
let current_page=parseInt(elm.getAttribute('data-page'));this.total=parseInt(elm.getAttribute('data-total'));this.target_elm=elm.parentNode.previousElementSibling;this.load_msg=document.createElement('div');current_page++;this.load_msg.classList.add('h5','text-center');this.load_msg.innerText='Loading...';this.target_elm.insertAdjacentElement('beforeend',this.load_msg);elm.disabled=!0;fetch(brd_data.ajax_url,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({action:'brd_more_posts_loop',page:current_page,type:type,total:this.total,exclude:exclude,tax:tax})}).then(response=>response.json()).then(resp=>{if(!resp.success)
this.error(resp);else if(resp.data.error&&resp.data.error=='loop_end')
this.hide_btn(elm);else this.success(resp,elm,current_page)}).catch(error=>{console.error('Error loading more posts:',error)}).finally(()=>{elm.removeAttribute('disabled');this.load_msg.remove()})},load_more_cats(elm,event){event.preventDefault();let type=elm.getAttribute('data-type');let topic=elm.getAttribute('data-topic');let load_more_btn=document.querySelector('.load_more[data-type="'+type+'"]');load_more_btn.setAttribute('data-tax',topic);load_more_btn.setAttribute('data-page',0);load_more_btn.click();let cat_list=document.querySelectorAll('.cat_list li');cat_list.forEach(cat_item=>{cat_item.classList.remove('active')});elm.classList.add('active')},load_more_blog_cats(elm,event){console.log(elm);let url=elm.getAttribute('data-topic');if(url)
window.location.href='/blog/'+url},error(resp){console.log(resp)},success(resp,elm,current_page=1){let paged=elm.getAttribute('data-page')?elm.getAttribute('data-page'):'';let data_tax=elm.getAttribute('data-tax')?elm.getAttribute('data-tax'):!1;if(data_tax&&paged==0)
this.target_elm.innerHTML=resp.data.html;else this.target_elm.insertAdjacentHTML('beforeend',resp.data.html);elm.setAttribute('data-page',current_page);elm.setAttribute('data-total',resp.data.total);this.total=resp.data.total;if(current_page==this.total)
this.hide_btn(elm);else this.show_btn(elm)},hide_btn(elm){elm.style.display='none'},show_btn(elm){elm.style.display='block'}}