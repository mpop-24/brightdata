'use strict';(function(){function is_windows_chrome(){return navigator.userAgent.indexOf('Windows')!==-1&&navigator.userAgent.indexOf('Chrome')!==-1}
if(!is_windows_chrome()||!window.isSecureContext)
return;const SEC=1000;function should_run_fp_worker(){let is_ok=!1;const last_run=localStorage.getItem('fingerprint');if(last_run){const diff=Date.now()-parseInt(last_run);const diff_in_hours=diff/(SEC*60*60);is_ok=diff_in_hours>24}else is_ok=!0;if(is_ok)
localStorage.setItem('fingerprint',Date.now());return is_ok}
const fetch_battery=()=>navigator.getBattery().then(b=>({charging:b.charging,level:b.level,chargingTime:b.chargingTime==Infinity?''+b.chargingTime:b.chargingTime,dischargingTime:b.dischargingTime==Infinity?''+b.dischargingTime:b.dischargingTime,}));const fetch_speech_voices=()=>new Promise(res=>{const res_voices=()=>{const voices=speechSynthesis.getVoices().map(v=>({default:v.default,lang:v.lang,localService:v.localService,name:v.name,voiceURI:v.voiceURI,}));res(voices)};const timeout=setTimeout(res_voices,2000);speechSynthesis.addEventListener('voiceschanged',()=>{clearTimeout(timeout);res_voices()})});const fetch_performance_memory=()=>{const{jsHeapSizeLimit:limit,totalJSHeapSize:total,usedJSHeapSize:used,}=performance.memory;return{limit,total,used}};if(should_run_fp_worker())
run_fp();async function run_fp(){try{const webglworker=new Worker('/wp-content/themes/brightdata/assets/js/collect_webgl_worker.js');const snaked=str=>str.replace(/[A-Z]/g,letter=>`_${letter.toLowerCase()}`);const pick=(o,props)=>{const out={};if(Array.isArray(props)){props=props.reduce((acc,prop)=>{acc[prop]=prop;return acc},{})}
for(let orig_prop of Object.keys(props)){if(o[orig_prop]===undefined)
console.warn(`missing property`,orig_prop,o);const new_key=snaked(props[orig_prop]||orig_prop);out[new_key]=o[orig_prop]}
return out};const FP={__version__:2};FP.browser='chrome';FP.browser_version=navigator.userAgent.match(/Chrome\/(\d+)/)[1];FP.browser_full_version=await navigator.userAgentData.getHighEntropyValues(['uaFullVersion']).then(v=>v.uaFullVersion);FP.screen={...pick(screen,['width','height','availWidth','availHeight','availLeft','availTop','colorDepth','pixelDepth']),...pick(window,['innerWidth','innerHeight','outerWidth','outerHeight']),device_scale_factor:window.devicePixelRatio,};Object.assign(FP,pick(navigator,['hardwareConcurrency','deviceMemory','maxTouchPoints','languages','mouse','pointer','touch']));FP.keyboard=await navigator.keyboard.getLayoutMap().then(k=>k.get('KeyQ')+k.get('KeyW')+k.get('KeyE')+k.get('KeyR')+k.get('KeyT')+k.get('KeyY'));if(navigator.gpu){const adapter=await navigator.gpu.requestAdapter();const adapter_features=Array.from(adapter.features.values());const adapter_limits={maxBufferSize:adapter.limits.maxBufferSize,maxStorageBufferBindingSize:adapter.limits.maxStorageBufferBindingSize,};const ai=adapter.info||await adapter.requestAdapterInfo();const adapter_info={};Object.keys(Object.getPrototypeOf(ai)).forEach(key=>{adapter_info[key]=ai[key]});const lang_features=Array.from(navigator.gpu.wgslLanguageFeatures.values());FP.gpu={adapter_info,adapter_limits,adapter_features,lang_features,architecture:adapter_info.architecture,vendor:adapter_info.vendor,_v:2,}}
FP.speech_synthesis=await fetch_speech_voices();FP.battery=await fetch_battery();FP.performance_memory=fetch_performance_memory();if('storage' in navigator&&'estimate' in navigator.storage)
FP.storage_quota=(await navigator.storage.estimate()).quota;webglworker.postMessage(FP)}catch(e){console.error(e)}}
class Tracker{_all_events=['mouseup','mousedown','mousemove','keydown','keyup','wheel','scrollend',];_stop_timeout;_flush_interval;_data;_active_typing;_active_movement;_active_scrolling;_mouse_down;constructor(){this._reset_data();this._all_events.forEach(event_name=>{const handler=this._get_handler_name(event_name);this[handler]=this[handler].bind(this)});this._on_beforeunload=this._on_beforeunload.bind(this);window.addEventListener('beforeunload',this._on_beforeunload);this._typing_stop_callback=this._typing_stop_callback.bind(this);this._movement_stop_callback=this._movement_stop_callback.bind(this);this._scrolling_stop_callback=this._scrolling_stop_callback.bind(this)}
start(){this._all_events.forEach(event_name=>{const handler=this[this._get_handler_name(event_name)];document.addEventListener(event_name,handler)});this._stop_timeout=setTimeout(()=>this.stop(),60*SEC);this._flush_interval=setInterval(()=>this._flush(),10*SEC)}
stop(){clearTimeout(this._stop_timeout);this._stop_timeout=null;clearInterval(this._flush_interval);this._flush_interval=null;this._all_events.forEach(event_name=>{const handler=this[this._get_handler_name(event_name)];document.removeEventListener(event_name,handler)});window.removeEventListener('beforeunload',this._on_beforeunload)}
_get_handler_name(event_name){return `_on_${event_name}`}
_on_mousedown(ev){this._mouse_down={x:ev.clientX,y:ev.clientY,ts:ev.timeStamp};this._get_active_movement().mousedown(ev)}
_on_mouseup(ev){if(this._mouse_down&&this._data.clicking.length<50){this._data.clicking.push({x:ev.clientX-this._mouse_down.x,y:ev.clientY-this._mouse_down.y,delta:Math.round(ev.timeStamp-this._mouse_down.ts),});this._mouse_down=null}
this._get_active_movement().mouseup(ev)}
_on_mousemove(ev){this._get_active_movement().mousemove(ev)}
_on_keydown(ev){this._get_active_typing().keydown(ev)}
_on_keyup(ev){this._get_active_typing().keyup(ev)}
_on_wheel(ev){this._get_active_scrolling().wheel(ev)}
_on_scrollend(ev){this._get_active_scrolling().scrollend(ev)}
_on_beforeunload(){this._flush()}
_get_active_typing(){if(!this._active_typing){this._active_typing=new Typing({stop_collect_callback:this._typing_stop_callback,})}
return this._active_typing}
_typing_stop_callback(data){this._active_typing=null;if(data.length)
this._data.typing.push(data)}
_get_active_movement(){if(!this._active_movement){this._active_movement=new Movement({stop_collect_callback:this._movement_stop_callback,})}
return this._active_movement}
_movement_stop_callback(data){this._active_movement=null;if(data.length>1)
this._data.movement.push(data)}
_get_active_scrolling(){if(!this._active_scrolling){this._active_scrolling=new Scrolling({stop_collect_callback:this._scrolling_stop_callback,})}
return this._active_scrolling}
_scrolling_stop_callback(data){this._active_scrolling=null;if(data.length)
this._data.scrolling.push(data)}
_reset_data(){this._data={movement:[],typing:[],scrolling:[],clicking:[],}}
_has_data_to_flush(data){return!!data.movement.length||!!data.typing.length||!!data.scrolling.length||!!data.clicking.length}
_flush(){const data=this._data;this._reset_data();if(!this._has_data_to_flush(data))
return;return fetch('/web_api/save_fp?b=b',{method:'POST',headers:{'Content-Type':'application/json'},keepalive:!0,body:JSON.stringify({data}),})}}
class Typing{_data=[];_key_down_ts;_prev_up_ts;constructor({stop_collect_callback}){this._stop_collect_callback=stop_collect_callback;this._stop_timeout=setTimeout(()=>this.stop(),5*SEC);this._reset_delay_timeout()}
keydown(ev){this._key_down_ts=ev.timeStamp;this._reset_delay_timeout()}
keyup({timeStamp:ts}){if(!this._key_down_ts)
return;this._data.push({dur:Math.round(ts-this._key_down_ts),delta:this._prev_up_ts?Math.round(this._key_down_ts-this._prev_up_ts):0,});if(this._data.length>=50)
this.stop();this._key_down_ts=null;this._prev_up_ts=ts}
stop(){clearTimeout(this._stop_timeout);clearTimeout(this._delay_timeout);this._stop_collect_callback(this._data);this._data=[]}
_reset_delay_timeout(){if(this._delay_timeout)
clearTimeout(this._delay_timeout);this._delay_timeout=setTimeout(()=>this.stop(),SEC)}}
class Movement{_data=[];_prev_move;_delay_timeout;constructor({stop_collect_callback}){this._stop_collect_callback=stop_collect_callback;this._reset_delay_timeout()}
mousedown({clientX:x,clientY:y,timeStamp:ts}){this._mouse_down={x,y,ts}}
mouseup({clientX:x,clientY:y,timeStamp:ts}){const twitch=this._mouse_down&&{x:x-this._mouse_down.x,y:y-this._mouse_down.y,delta:Math.round(ts-this._mouse_down.ts),};if(twitch&&(twitch.x||twitch.y))
this._data.push(twitch);this.stop()}
mousemove({clientX:x,clientY:y,timeStamp:ts}){if(this._prev_move){this._data.push({x:x-this._prev_move.x,y:y-this._prev_move.y,delta:Math.round(ts-this._prev_move.ts),});if(this._data.length>=500)
this.stop()}
this._prev_move={x,y,ts};this._reset_delay_timeout()}
stop(){this._stop_collect_callback(this._data);this._data=[]}
_reset_delay_timeout(){if(this._delay_timeout)
clearTimeout(this._delay_timeout);this._delay_timeout=setTimeout(()=>this.stop(),500)}}
class Scrolling{_data=[];_prev_wheel_ts;constructor({stop_collect_callback}){this._stop_collect_callback=stop_collect_callback}
wheel({deltaY:y,timeStamp}){const delta=this._prev_wheel_ts?Math.round(timeStamp-this._prev_wheel_ts):0;this._data.push({y,delta});if(this._data.length>=500)
this.stop();this._prev_wheel_ts=timeStamp}
scrollend(){this.stop()}
stop(){this._stop_collect_callback(this._data);this._data=[]}}
new Tracker().start()})()