'use strict';const acf_datasets_directory={init(){this.form();this.filters();this.navigate();this.search();this.select();this.listeners()},form(){const form=document.querySelector('.datasets__form');if(form)
form.onsubmit=e=>e.preventDefault()},filters(){const filters=document.querySelectorAll('.datasets__filter');if(!filters)
return;filters.forEach(f=>{f.onclick=e=>{const t=e.currentTarget;if(t.classList.contains('active'))
return;const name=t.dataset.filter;if(!name)
return;const active=document.querySelectorAll('.datasets__filter.active');const inp=document.querySelectorAll('.datasets__form input');if(active){active.forEach(a=>{a.classList.remove('active');a.closest('li').classList.remove('active')});t.classList.add('active');t.closest('li').classList.add('active')}
if(inp)
inp.value='';this.filter_datasets(name)}})},show(el){el.style.display='block'},hide(el){el.style.display='none'},filter_datasets(name){const wraps=document.querySelectorAll('.datasets__item--wrapper');if(!wraps)
return;const no_res=document.getElementById('ds_no_result');if(no_res)
no_res.style.display='none';wraps.forEach(w=>{if(w.classList.contains(name))
this.show(w);else this.hide(w)})},navigate(){if(!location.hash)
return;const filter=document.querySelector(`.datasets__filter[href="${location.hash}"]`);if(filter)
filter.click()},search(){let search_timeout;const inp=document.querySelector('.datasets__form input');if(!inp)
return;inp.addEventListener('input',e=>{handle_input(e)});function handle_input(e){clearTimeout(search_timeout);const wraps=document.querySelectorAll('.datasets__item--wrapper');const input_el=e.currentTarget;let input_val=input_el.value.trim();const no_res=document.getElementById('ds_no_result');search_timeout=setTimeout(()=>{let has_results=!1;wraps.forEach(w=>{const title=w.querySelector('.datasets__item--title');const text=title.innerText.toLowerCase();const filter_active=document.querySelector('.datasets__filter.active');const filter_all=document.querySelector('.datasets__filter[data-filter=all]');const is_url=/^(https?:\/\/)?([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/\S*)?$/i;if(is_url.test(input_val)){w.style.display='block';const clean_title=text.replace(' datasets','');const clean_title2=clean_title.split(' ');const list=['https://','http://','www.'];for(let i=0;i<list.length;i++)
input_val=input_val.replace(list[i],'');let search_parts=input_val.split('.');let search=search_parts[0];const url_in_title=clean_title2[0].indexOf(search.toLowerCase())!==-1;if(url_in_title){has_results=!0;w.style.display='block'}else{w.style.display='none'}}else{const found=text.indexOf(input_val.toLowerCase());if(found>=0){w.style.display='block';has_results=!0}else{w.style.display='none'}}
if(has_results)
no_res.style.display='none';else no_res.removeAttribute('style');if(filter_active){filter_active.classList.remove('active');filter_active.closest('li').classList.remove('active')}
if(filter_all){filter_all.classList.add('active');filter_all.closest('li').classList.add('active')}});if(!input_val||input_val=='')
return;let event_name=input_el.getAttribute('data-tpl')=='dataset'?'datasets-search':'ide-search';dataLayer.push({'event':event_name,'datasets-search':input_val,'search-query':input_val})},450)}},select(){if(!window.matchMedia('(max-width: 1023px)').matches)
return;const select=document.body.querySelector('.datasets__wrapper');select.addEventListener('click',e=>{const el=e.target.closest('.datasets__filters');if(el.classList.contains('open'))
el.classList.remove('open');else{e.preventDefault();el.classList.add('open')}},!1)},default_tab_click(){const default_tab=document.getElementById('default_tab');if(!default_tab)
return;const default_tab_name=default_tab.getAttribute('data-default');const filters=document.querySelectorAll('.datasets__filter_wrap '+'a[data-filter="'+default_tab_name+'"]');if(!default_tab_name||!filters.length)
return;const default_tab_click=document.querySelectorAll('.datasets__filter_wrap a[data-filter="'+default_tab_name+'"]');default_tab_click.forEach(tab=>{tab.click();tab.click()})},listeners(){document.addEventListener('DOMContentLoaded',this.default_tab_click)},};acf_datasets_directory.init()