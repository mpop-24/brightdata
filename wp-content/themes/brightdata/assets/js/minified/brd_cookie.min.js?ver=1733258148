'use strict';const brd_cookie={init(){this.init_login()},init_login(){this.btn_user=document.querySelector('#btn_user');if(!this.btn_user)
return;if(typeof window.brd.essentials.get_cookie=='undefined'){if(typeof performance!='undefined'){let resources=JSON.stringify(performance.getEntries().filter(e=>{return e.initiatorType=='script'&&e.name.indexOf(location.hostname)>-1}).map(e=>{const link=new URL(e.name);return{name:link.pathname,start:parseInt(e.requestStart),end:parseInt(e.responseEnd),body_size:e.decodedBodySize}}));err_report(document,'script',{resources,file:'cookie.js',line:'test',col:'test'})}}
const data=window.brd.essentials.get_cookie('brd_user')?window.brd.essentials.get_cookie('brd_user','object'):!1;if(data)
return this.show_user_name(data,!1);fetch('/users/get_user',{method:'POST',credentials:'include'}).then(resp=>resp.status==200?resp.json():{}).then(resp=>{if(!resp.user)
return'';this.show_user_name(resp,!0)}).catch()},cp_user_cookie(user){if(typeof user==='undefined'||typeof user.displayName==='undefined'&&typeof user.display_name==='undefined'){this.set_cp_not_logged_in()}else{this.set_cp_logged_in();const email=document.getElementById('header_user_email');const signout=document.querySelector('a.signout_link');if(email!==null)
email.innerText=user.displayName;if(signout!==null)
signout.addEventListener('click',this.sign_out);this.replace_cp_link()}},set_cp_not_logged_in(){document.querySelectorAll('.not_logged_in').forEach(item=>item.style.display='block');document.querySelectorAll('.logged_in').forEach(item=>item.style.display='none')},set_cp_logged_in(){document.querySelectorAll('.logged_in').forEach(item=>item.style.display='block');document.querySelectorAll('.not_logged_in').forEach(item=>item.style.display='none')},sign_out(e){e.preventDefault();fetch('/users/logout/inline',{method:'post',credentials:'include',}).then(response=>{window.brd.essentials.remove_cookie('brd_user');window.brd.essentials.remove_cookie('brd_customer');location.reload()}).catch()},show_user_name(data,update_cookie){if(!data||!this.btn_user)
return!1;this.cp_user_cookie(data.user);const cookie_data={user:{is_root:data.user.is_root,display_name:data.user.display_name?data.user.display_name:data.user.displayName,}};if(update_cookie){window.brd.essentials.set_cookie('brd_user',cookie_data,{expires:1/24},'object')}
if(data.user.is_root){this.btn_user.innerText='root_user';return!0}
this.show_customer_name()},show_customer_name(){let data=window.brd.essentials.get_cookie('brd_customer')?window.brd.essentials.get_cookie('brd_customer','object'):!1;if(data)
return this.btn_user.innerText=data[0].name;fetch('/users/customers',{method:'GET',credentials:'include'}).then(resp=>resp.status==200?resp.json():!1).then(resp=>{if(!resp||!resp[0])
return;const cookie_cdata={0:{name:resp[0].name,owner:resp[0].owner}};window.brd.essentials.set_cookie('brd_customer',cookie_cdata,{expires:1/24},'object');this.btn_user.innerText=resp[0].name}).catch()},replace_cp_link(){const link=document.querySelector('#hero_cp a');if(link){link.href='https://brightdata.com/cp';const txt_el=link.querySelector('.elementor-button-text');if(txt_el)
txt_el.innerText='Control Panel'}
const dca_cp_btn=document.querySelector('#dca_second');if(dca_cp_btn)
dca_cp_btn.style.display='none'},};brd_cookie.init()